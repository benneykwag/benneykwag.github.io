---
layout: post
title:  "eui 프레임웍을 활용한 그리드 CRUD 프로그래밍"
date:   2016-04-13 16:25:50 +0900
categories: lecture
---

이 강좌의 결과를 확인하시려면  [여기를][eui-sample-site] 클릭하시면 샘플프로그램을 실행해 볼수 있습니다.
단지 post전송은 git에 의해 막혀있어 처리되지 않습니다. 참고하세요.

eui프레임웍은 자체 그리드를 통해 CRUD를 쉽게 처리할 수 있도록 지원합니다. 이번 강좌에서는 euigrid의 명령버튼을 포함시키고
로우를 추가,삭제,수정 등의 기능을 구현해 보도록 하겠습니다.

eui-sample 앱은 universal app로 생성하였으므로 뷰는 classic폴더에 포함됨을 알고 있자.

Step 1 : 신규 클래스 정의 및 사용할 eui클래스.
==

파일명                     | 경로          | 기능 설명
-------------------------------|:-------------|:---
Eui.sample.model.Base   | eui-sample/app | Model클래스 
Eui.sample.model.Message| eui-sample/app | Model클래스
Eui.sample.view.grid.BasicController | eui-sample/app| ViewController
Eui.sample.view.grid.BasicModel | eui-sample/app| ViewModel
Eui.sample.view.grid.Basic | eui-sample/classic| 메인클래스
Eui.sample.view.grid.RecordForm | eui-sample/classic| 입력 및 수정폼 클래스
eui.form.Panel          |   eui-core    |   테이블레이아웃용 폼패널
eui.toolbar.Command     |   eui-core    |   명령버튼 제공 
eui.grid.Panel          |   eui-core    |   CRUD등 기능제공
eui.form.Label          |   eui-core    |   폼레이블
eui.form.field.Text     |   eui-core    |   폼텍스트필드


Step 2 : Eui.sample.view.grid.Basic 클래스 작성하기.
==

이 클래스는 우리가 작성할 샘플프로그램의 메인 클래스이다. item으로 euigrid를 포함하고 있으며
euigrid 는 crud에 필요한 버튼 집합을 제공하는 commandtoolbar를 가지고 있다.

{% highlight javascript %}

Ext.define('Eui.sample.view.grid.Basic', {
    extend: 'Ext.panel.Panel',
    xtype: 'sample-basic-grid',
    title: '#{행추가2}',
    requires: [
        'eui.grid.Panel',   // Ext.grid.Panel클래스를 확장한 eui-core용 그리드 클래스.
        'Eui.sample.view.grid.RecordForm',      // 등록 및 수정 폼
        'Eui.sample.model.Base',
        'Eui.sample.view.grid.BasicModel',      // 뷰모델 클래스
        'eui.toolbar.Command',                  // 명령버튼 제공
        'Eui.sample.view.grid.BasicController'  // 뷰컨트롤러 클래스
    ],
    controller: 'sample-basic-grid',
    viewModel: 'sample-basic-grid',
    layout: 'fit',
    items: [
        {
            xtype: 'euigrid',
            plugins: {  
                ptype: 'cellediting',   // 셀에디터를 추가.
                clicksToEdit: 2         // 더블클릭을 통해 에디터로 변환됨.
            },
            selModel: {     // 그리로우를 클릭시 체크박스를 통해 선택되며 체크와 체크해제
                mode: 'SIMPLE',
                selType: 'checkboxmodel'
            },
            // 그리드에 페이징 툴바를 추가.
            usePagingToolbar: true,
            tbar: [
                {
                    showRowAddBtn: true,    // 행추가 버튼 활성화
                    showRowDelBtn: true,    // 행삭제 버튼 활성화
                    showRegBtn: true,       // 등록 버튼 활성화
                    showModBtn: true,       // 수정 버튼 활성화
                    showSaveBtn: true,      // 저장 버튼 활성화
                    showReloadBtn: true,    // 조회 버튼 활성화
                    xtype: 'commandtoolbar' // eui.toolbar.Command 클래스
                }
            ],
            bind: {
                store: '{mystore}'      // ViewModel클래스에 정의됨.
            },
            listeners: {                // ViewController클래스에 정의됨.
                select: 'onGridSelect',
                regBtnClick: 'onRowReg',
                rowDeleteBtnClick: 'onRowDelete',
                modBtnClick: 'onRowMod',
                rowAddBtnClick: 'onRowAdd',
                saveBtnClick: 'onRowSave'
            },
            columns: [
                {
                    text: '#{행추가2}',
                    width: 100,
                    dataIndex: 'MSG_ID',
                    editor: {
                        bind: "{messageRecord.MSG_ID}",
                        xtype: 'textfield'
                    }
                },
                {
                    text: 'MSG_LABEL',
                    flex: 1,
                    dataIndex: 'MSG_LABEL',
                    editor: {
                        bind: "{messageRecord.MSG_LABEL}",
                        xtype: 'textfield'
                    }
                }
            ]
        }
    ]

});
{% endhighlight %}


-- 진행 중.